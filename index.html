<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="description" content="CementFlow - Professional booking and invoicing system for cement distribution with persistent storage.">
    <title>CementFlow - Cement Distribution Management</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff6600;
            --primary-dark: #cc5200;
            --primary-light: #ff8533;
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #495057;
            --text-muted: #6c757d;
            --border: #dee2e6;
            --success: #28a745;
            --error: #dc3545;
            --warning: #ffc107;
            --sidebar-width: 256px;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
        }

        /* Login Screen */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #ff6600 0%, #ff8533 100%);
        }

        .login-box {
            background: white;
            padding: 48px;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 90%;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
            font-size: 36px;
            margin: 0 auto 24px;
        }

        .login-title {
            text-align: center;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .login-subtitle {
            text-align: center;
            color: var(--text-muted);
            margin-bottom: 32px;
        }

        .app-container {
            display: flex;
            height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }

        .sidebar.collapsed {
            transform: translateX(-100%);
        }

        .sidebar-header {
            height: 64px;
            padding: 16px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        }

        .logo {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary);
            font-size: 20px;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 8px;
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            margin-bottom: 4px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 14px;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--primary);
            color: white;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid var(--border);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border-radius: 6px;
            background: var(--bg-tertiary);
            font-size: 12px;
            margin-bottom: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .status-dot.offline {
            background: var(--error);
            animation: none;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header-bar {
            height: 64px;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-secondary);
        }

        .page-title {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.5px;
            color: var(--text-primary);
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
        }

        /* Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.2s;
        }

        .stat-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.1);
        }

        .stat-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            color: var(--text-muted);
            font-size: 14px;
            font-weight: 500;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            font-family: 'IBM Plex Mono', monospace;
            color: var(--primary);
        }

        /* Buttons */
        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
            font-family: inherit;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.3);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-tertiary);
            border-color: var(--text-secondary);
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .form-label.required::after {
            content: '*';
            color: var(--error);
            margin-left: 4px;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 10px 12px;
            border-radius: 8px;
            border: 2px solid var(--border);
            background: white;
            color: var(--text-primary);
            font-size: 16px;
            font-family: inherit;
            transition: all 0.2s;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-textarea {
            resize: vertical;
            min-height: 96px;
            font-family: 'IBM Plex Mono', monospace;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        /* Smart Entry */
        .smart-entry {
            background: linear-gradient(135deg, #ff6600 0%, #ff8533 100%);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 32px;
            box-shadow: 0 4px 12px rgba(255, 102, 0, 0.2);
        }

        .smart-entry-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .smart-entry-icon {
            width: 32px;
            height: 32px;
            color: white;
        }

        .smart-entry h3 {
            font-size: 18px;
            font-weight: 600;
            color: white;
        }

        .smart-entry p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin-bottom: 16px;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--border);
            overflow: hidden;
        }

        .table-header {
            padding: 16px 24px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-secondary);
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .table-filters {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-chip {
            padding: 6px 12px;
            border-radius: 6px;
            border: 2px solid var(--border);
            background: white;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .filter-chip:hover, .filter-chip.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .search-input {
            padding: 8px 12px;
            border-radius: 6px;
            border: 2px solid var(--border);
            background: white;
            color: var(--text-primary);
            font-size: 14px;
            width: 250px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        thead {
            background: var(--bg-secondary);
        }

        th {
            padding: 12px 24px;
            text-align: left;
            font-weight: 600;
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
        }

        tbody tr:hover {
            background: var(--bg-secondary);
        }

        .table-actions {
            display: flex;
            gap: 8px;
        }

        .icon-btn {
            padding: 6px;
            border: none;
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .icon-btn:hover {
            background: var(--bg-tertiary);
            color: var(--primary);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.2s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: white;
            border-radius: 12px;
            border: 2px solid var(--border);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 2px solid var(--border);
            background: var(--bg-secondary);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-footer {
            padding: 24px;
            border-top: 2px solid var(--border);
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            background: var(--bg-secondary);
        }

        /* Toast */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            min-width: 300px;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInRight 0.3s;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--error);
        }

        .toast.info {
            border-left: 4px solid var(--primary);
        }

        .toast-icon {
            width: 20px;
            height: 20px;
        }

        .toast-message {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        /* Invoice Print */
        .invoice {
            background: white;
            color: #000;
            max-width: 800px;
            margin: 0 auto;
            padding: 48px;
        }

        .invoice-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 48px;
            padding-bottom: 24px;
            border-bottom: 2px solid #ff6600;
        }

        .invoice-title {
            font-size: 32px;
            font-weight: 700;
            color: #ff6600;
        }

        .invoice-details {
            text-align: right;
        }

        .invoice-table {
            margin: 32px 0;
        }

        .invoice-table table {
            border: 1px solid #ddd;
        }

        .invoice-table th {
            background: #fff3e6;
            color: #000;
        }

        .invoice-total {
            text-align: right;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 2px solid #ff6600;
        }

        .invoice-total-row {
            display: flex;
            justify-content: flex-end;
            gap: 48px;
            margin-bottom: 8px;
            font-size: 16px;
        }

        .invoice-total-row.grand {
            font-size: 24px;
            font-weight: 700;
            margin-top: 16px;
            color: #ff6600;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .badge-error {
            background: #f8d7da;
            color: #721c24;
        }

        .empty-state {
            text-align: center;
            padding: 64px 24px;
            color: var(--text-muted);
        }

        .empty-state-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            opacity: 0.5;
            color: var(--text-muted);
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid transparent;
            border-top-color: currentColor;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media print {
            .sidebar, .header-bar, .btn, .table-actions {
                display: none !important;
            }
            .main-content {
                margin: 0;
            }
            .invoice {
                box-shadow: none;
                margin: 0;
                padding: 1.6cm;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                z-index: 100;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .table-filters {
                flex-direction: column;
                align-items: stretch;
            }
            .search-input {
                width: 100%;
            }
        }

        .hidden {
            display: none !important;
        }

        .logout-btn {
            width: 100%;
            text-align: left;
        }

        .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-sm.btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-sm.btn-primary:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="login-box">
            <div class="login-logo">CF</div>
            <h1 class="login-title">CementFlow</h1>
            <p class="login-subtitle">Distribution Management System</p>

            <form id="loginForm">
                <div class="form-group">
                    <label class="form-label required">Username</label>
                    <input type="text" class="form-input" id="loginUsername" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label class="form-label required">Password</label>
                    <input type="password" class="form-input" id="loginPassword" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;">
                    <span id="loginBtnText">Login</span>
                </button>
                <div id="loginError" style="color: var(--error); margin-top: 12px; text-align: center; font-size: 14px;"></div>
            </form>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container hidden" id="mainApp">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">CF</div>
                <div>
                    <div style="font-weight: 700; font-size: 16px; color: white;">CementFlow</div>
                    <div style="font-size: 12px; color: rgba(255,255,255,0.8);">Distribution Manager</div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-item active" data-page="dashboard">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                    </svg>
                    Dashboard
                </div>
                <div class="nav-item" data-page="new-booking">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    New Booking
                </div>
                <div class="nav-item" data-page="bookings">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                    </svg>
                    All Bookings
                </div>
                <div class="nav-item" data-page="products">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                    </svg>
                    Products
                </div>
                <div class="nav-item" data-page="admin">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    Admin Panel
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span id="statusText">Online</span>
                </div>
                <button class="btn btn-danger logout-btn" onclick="logout()">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
                    </svg>
                    Logout
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header-bar">
                <h1 class="page-title" id="pageTitle">Dashboard</h1>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="toggleSidebar()">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="content-area">
                <!-- Dashboard Page -->
                <div id="dashboardPage">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                </div>
                                Total Bookings
                            </div>
                            <div class="stat-value" id="totalBookings">0</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                Total Revenue
                            </div>
                            <div class="stat-value">GH₵ <span id="totalRevenue">0</span></div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </div>
                                Pending Orders
                            </div>
                            <div class="stat-value" id="pendingOrders">0</div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-header">
                                <div class="stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                    </svg>
                                </div>
                                Delivered
                            </div>
                            <div class="stat-value" id="deliveredOrders">0</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Recent Bookings</h2>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Product</th>
                                    <th>Quantity</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="recentBookingsTable">
                                <tr>
                                    <td colspan="7" class="empty-state">
                                        <div class="empty-state-icon">
                                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                        </div>
                                        <div>No bookings yet. Create your first booking to get started.</div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- New Booking Page -->
                <div id="newBookingPage" class="hidden">
                    <div class="smart-entry">
                        <div class="smart-entry-header">
                            <svg class="smart-entry-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                            </svg>
                            <h3>AI Smart Entry</h3>
                        </div>
                        <p>Enter booking details in natural language, and AI will fill the form for you.</p>
                        <textarea class="form-textarea" id="smartEntryText" placeholder="Example: John Mensah needs 50 bags of Dangote cement delivered to Accra tomorrow, phone 0244123456" style="background: white;"></textarea>
                        <button class="btn btn-primary" onclick="processSmartEntry()" id="processBtn" style="margin-top: 12px;">
                            <span id="processBtnText">Process with AI</span>
                        </button>
                        <div id="aiNote" style="margin-top: 12px; font-size: 13px; color: rgba(255,255,255,0.9);"></div>
                    </div>

                    <form id="bookingForm" style="background: white; padding: 24px; border-radius: 12px; border: 2px solid var(--border);">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required">Customer Name</label>
                                <input type="text" class="form-input" id="customerName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label required">Phone Number</label>
                                <input type="tel" class="form-input" id="customerPhone" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Delivery Address</label>
                            <input type="text" class="form-input" id="deliveryAddress">
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label required">Product</label>
                                <select class="form-select" id="productSelect" required>
                                    <option value="">Select product...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label required">Quantity (bags)</label>
                                <input type="number" class="form-input" id="quantity" min="1" required>
                            </div>
                        </div>

                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Delivery Date</label>
                                <input type="date" class="form-input" id="deliveryDate">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="status">
                                    <option value="pending">Pending</option>
                                    <option value="confirmed">Confirmed</option>
                                    <option value="delivered">Delivered</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <textarea class="form-textarea" id="notes"></textarea>
                        </div>

                        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px;">
                            <button type="button" class="btn btn-secondary" onclick="resetForm()">Reset</button>
                            <button type="submit" class="btn btn-primary">Create Booking</button>
                        </div>
                    </form>
                </div>

                <!-- All Bookings Page -->
                <div id="bookingsPage" class="hidden">
                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">All Bookings</h2>
                            <div class="table-filters">
                                <button class="filter-chip active" data-filter="all">All</button>
                                <button class="filter-chip" data-filter="pending">Pending</button>
                                <button class="filter-chip" data-filter="confirmed">Confirmed</button>
                                <button class="filter-chip" data-filter="delivered">Delivered</button>
                                <input type="text" class="search-input" placeholder="Search customer..." id="searchInput">
                                <button class="btn btn-primary" onclick="exportToExcel()">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                    </svg>
                                    Export to Excel
                                </button>
                            </div>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Date</th>
                                    <th>Customer</th>
                                    <th>Phone</th>
                                    <th>Product</th>
                                    <th>Qty</th>
                                    <th>Amount</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="allBookingsTable">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Products Page -->
                <div id="productsPage" class="hidden">
                    <div style="margin-bottom: 24px;">
                        <button class="btn btn-primary" onclick="showAddProductModal()">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                            </svg>
                            Add Product
                        </button>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h2 class="table-title">Product Catalog</h2>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Product Name</th>
                                    <th>Price per Bag (GH₵)</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTable">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Admin Panel Page -->
                <div id="adminPage" class="hidden">
                    <div style="background: white; padding: 32px; border-radius: 12px; border: 2px solid var(--border); max-width: 600px;">
                        <h2 style="margin-bottom: 24px; color: var(--primary);">Admin Panel</h2>

                        <div style="background: #fff3cd; border: 2px solid #ffc107; padding: 16px; border-radius: 8px; margin-bottom: 24px;">
                            <strong>⚠️ Warning:</strong> The actions below are irreversible. Please proceed with caution.
                        </div>

                        <div style="margin-bottom: 32px;">
                            <h3 style="margin-bottom: 12px;">Database Statistics</h3>
                            <div style="background: var(--bg-secondary); padding: 16px; border-radius: 8px; font-family: 'IBM Plex Mono', monospace;">
                                <div style="margin-bottom: 8px;">Total Bookings: <strong id="adminTotalBookings">0</strong></div>
                                <div style="margin-bottom: 8px;">Total Products: <strong id="adminTotalProducts">0</strong></div>
                                <div>Database Status: <strong style="color: var(--success);">Active</strong></div>
                            </div>
                        </div>

                        <div style="margin-bottom: 24px;">
                            <h3 style="margin-bottom: 12px;">Export Data</h3>
                            <button class="btn btn-primary" onclick="exportAllData()">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                Export All Data (Excel)
                            </button>
                        </div>

                        <div style="border-top: 2px solid var(--border); padding-top: 24px;">
                            <h3 style="margin-bottom: 12px; color: var(--error);">Danger Zone</h3>
                            <button class="btn btn-danger" onclick="resetAllData()">
                                <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                                </svg>
                                Reset All Data
                            </button>
                            <p style="margin-top: 8px; font-size: 13px; color: var(--text-muted);">This will permanently delete all bookings and reset products to defaults.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // IndexedDB Setup
        const DB_NAME = 'CementFlowDB';
        const DB_VERSION = 1;
        let db = null;

        // Authentication
        const ADMIN_USERNAME = 'CEMENT';
        const ADMIN_PASSWORD = '419';
        let isAuthenticated = false;

        // Data Models
        let bookings = [];
        let products = [];
        let currentFilter = 'all';
        let currentPage = 'dashboard';

        // Initialize IndexedDB
        function initDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(DB_NAME, DB_VERSION);

                request.onerror = () => reject(request.error);
                request.onsuccess = () => {
                    db = request.result;
                    resolve(db);
                };

                request.onupgradeneeded = (event) => {
                    const database = event.target.result;

                    if (!database.objectStoreNames.contains('bookings')) {
                        database.createObjectStore('bookings', { keyPath: 'id' });
                    }
                    if (!database.objectStoreNames.contains('products')) {
                        database.createObjectStore('products', { keyPath: 'id' });
                    }
                };
            });
        }

        // Save data to IndexedDB
        async function saveData() {
            if (!db) return;

            try {
                const transaction = db.transaction(['bookings', 'products'], 'readwrite');

                // Clear existing data
                await transaction.objectStore('bookings').clear();
                await transaction.objectStore('products').clear();

                // Save bookings
                bookings.forEach(booking => {
                    transaction.objectStore('bookings').add(booking);
                });

                // Save products
                products.forEach(product => {
                    transaction.objectStore('products').add(product);
                });

                console.log('Data saved to IndexedDB');
            } catch (e) {
                console.error('Error saving to IndexedDB:', e);
            }
        }

        // Load data from IndexedDB
        async function loadData() {
            if (!db) await initDB();

            return new Promise((resolve) => {
                const transaction = db.transaction(['bookings', 'products'], 'readonly');

                // Load bookings
                const bookingsRequest = transaction.objectStore('bookings').getAll();
                bookingsRequest.onsuccess = () => {
                    bookings = bookingsRequest.result || [];
                };

                // Load products
                const productsRequest = transaction.objectStore('products').getAll();
                productsRequest.onsuccess = () => {
                    products = productsRequest.result || [];
                    if (products.length === 0) {
                        products = getDefaultProducts();
                        saveData();
                    }
                };

                transaction.oncomplete = () => {
                    console.log('Data loaded from IndexedDB');
                    resolve();
                };
            });
        }

        function getDefaultProducts() {
            return [
                { id: 1, name: 'Dangote Cement', price: 85 },
                { id: 2, name: 'GHACEM Cement', price: 82 },
                { id: 3, name: 'Diamond Cement', price: 80 }
            ];
        }

        // Login
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                isAuthenticated = true;
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');

                await initDB();
                await loadData();
                initEventListeners();
                updateUI();
                checkOnlineStatus();
                setInterval(checkOnlineStatus, 5000);

                showToast('Welcome to CementFlow!', 'success');
            } else {
                document.getElementById('loginError').textContent = 'Invalid username or password';
            }
        });

        function logout() {
            showConfirmDialog('Are you sure you want to logout?', () => {
                isAuthenticated = false;
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('mainApp').classList.add('hidden');
                document.getElementById('loginForm').reset();
                document.getElementById('loginError').textContent = '';
            });
        }

        function initEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const page = e.currentTarget.dataset.page;
                    navigateTo(page);
                });
            });

            // Booking form
            document.getElementById('bookingForm').addEventListener('submit', handleBookingSubmit);

            // Filter chips
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.addEventListener('click', (e) => {
                    document.querySelectorAll('.filter-chip').forEach(c => c.classList.remove('active'));
                    e.currentTarget.classList.add('active');
                    currentFilter = e.currentTarget.dataset.filter;
                    renderBookingsTable();
                });
            });

            // Search
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', renderBookingsTable);
            }
        }

        function navigateTo(page) {
            currentPage = page;

            // Update nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.page === page) {
                    item.classList.add('active');
                }
            });

            // Hide all pages
            document.querySelectorAll('[id$="Page"]').forEach(p => p.classList.add('hidden'));

            // Show current page
            const pageMap = {
                'dashboard': 'dashboardPage',
                'new-booking': 'newBookingPage',
                'bookings': 'bookingsPage',
                'products': 'productsPage',
                'admin': 'adminPage'
            };

            const titleMap = {
                'dashboard': 'Dashboard',
                'new-booking': 'New Booking',
                'bookings': 'All Bookings',
                'products': 'Product Management',
                'admin': 'Admin Panel'
            };

            document.getElementById(pageMap[page]).classList.remove('hidden');
            document.getElementById('pageTitle').textContent = titleMap[page];

            if (page === 'bookings') {
                renderBookingsTable();
            } else if (page === 'products') {
                renderProductsTable();
            } else if (page === 'admin') {
                updateAdminStats();
            }
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('collapsed');
        }

        // Smart Entry with AI
        async function processSmartEntry() {
            const text = document.getElementById('smartEntryText').value.trim();
            if (!text) {
                showToast('Please enter booking details', 'error');
                return;
            }

            if (!navigator.onLine) {
                showToast('AI features require internet connection', 'error');
                return;
            }

            const btn = document.getElementById('processBtn');
            const btnText = document.getElementById('processBtnText');
            const originalText = btnText.textContent;

            btn.disabled = true;
            btnText.innerHTML = '<span class="loading"></span> Processing...';

            try {
                if (typeof window.Poe !== 'undefined' && window.Poe.sendUserMessage) {
                    window.Poe.registerHandler('smart-entry-handler', (result) => {
                        const msg = result.responses[0];

                        if (msg.status === 'error') {
                            showToast('AI processing failed: ' + msg.statusText, 'error');
                            btn.disabled = false;
                            btnText.textContent = originalText;
                        } else if (msg.status === 'complete') {
                            try {
                                const data = JSON.parse(msg.content);
                                fillFormWithAIData(data);
                                showToast('Form filled successfully!', 'success');
                            } catch (e) {
                                showToast('Error parsing AI response', 'error');
                            }
                            btn.disabled = false;
                            btnText.textContent = originalText;
                        }
                    });

                    await window.Poe.sendUserMessage(
                        `@GPT-5.1 Extract booking information from this text and return ONLY a JSON object with these fields: customerName, customerPhone, deliveryAddress, product (product name only), quantity (number), deliveryDate (YYYY-MM-DD format), notes. Text: "${text}"`,
                        {
                            handler: 'smart-entry-handler',
                            stream: false,
                            openChat: false
                        }
                    );
                } else {
                    document.getElementById('aiNote').textContent = 'Note: AI features are not available. Using basic text parsing.';
                    parseSmartEntryBasic(text);
                    btn.disabled = false;
                    btnText.textContent = originalText;
                }
            } catch (err) {
                showToast('Error processing with AI: ' + err.message, 'error');
                btn.disabled = false;
                btnText.textContent = originalText;
            }
        }

        function parseSmartEntryBasic(text) {
            const phoneMatch = text.match(/0\d{9}|\+233\d{9}/);
            const quantityMatch = text.match(/(\d+)\s*bags?/i);

            if (phoneMatch) {
                document.getElementById('customerPhone').value = phoneMatch[0];
            }
            if (quantityMatch) {
                document.getElementById('quantity').value = quantityMatch[1];
            }

            const nameMatch = text.match(/^([A-Z][a-z]+(?:\s+[A-Z][a-z]+)*)/);
            if (nameMatch) {
                document.getElementById('customerName').value = nameMatch[1];
            }

            showToast('Basic parsing completed. Please verify the details.', 'info');
        }

        function fillFormWithAIData(data) {
            if (data.customerName) document.getElementById('customerName').value = data.customerName;
            if (data.customerPhone) document.getElementById('customerPhone').value = data.customerPhone;
            if (data.deliveryAddress) document.getElementById('deliveryAddress').value = data.deliveryAddress;
            if (data.quantity) document.getElementById('quantity').value = data.quantity;
            if (data.deliveryDate) document.getElementById('deliveryDate').value = data.deliveryDate;
            if (data.notes) document.getElementById('notes').value = data.notes;

            if (data.product) {
                const productSelect = document.getElementById('productSelect');
                for (let option of productSelect.options) {
                    if (option.text.toLowerCase().includes(data.product.toLowerCase())) {
                        option.selected = true;
                        break;
                    }
                }
            }
        }

        // Booking Form
        function handleBookingSubmit(e) {
            e.preventDefault();

            const productSelect = document.getElementById('productSelect');
            const selectedProduct = products.find(p => p.id === parseInt(productSelect.value));

            if (!selectedProduct) {
                showToast('Please select a product', 'error');
                return;
            }

            const quantity = parseInt(document.getElementById('quantity').value);
            const amount = selectedProduct.price * quantity;

            const booking = {
                id: Date.now(),
                date: new Date().toISOString().split('T')[0],
                createdAt: new Date().toISOString(),
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value,
                deliveryAddress: document.getElementById('deliveryAddress').value,
                product: selectedProduct.name,
                productId: selectedProduct.id,
                quantity: quantity,
                pricePerUnit: selectedProduct.price,
                amount: amount,
                deliveryDate: document.getElementById('deliveryDate').value,
                status: document.getElementById('status').value,
                paymentStatus: 'unpaid',
                notes: document.getElementById('notes').value,
                activityLog: [{
                    timestamp: new Date().toISOString(),
                    action: 'Booking created',
                    user: 'Manager'
                }]
            };

            bookings.unshift(booking);
            saveData();
            updateUI();
            resetForm();
            showToast('Booking created successfully!', 'success');
            navigateTo('bookings');
        }

        function resetForm() {
            document.getElementById('bookingForm').reset();
            document.getElementById('smartEntryText').value = '';
        }

        // Edit Booking
        function editBooking(id) {
            const booking = bookings.find(b => b.id === id);
            if (!booking) return;

            showEditBookingModal(booking);
        }

        // Quick Status Update
        function quickStatusUpdate(id, newStatus) {
            const booking = bookings.find(b => b.id === id);
            if (!booking) return;

            const oldStatus = booking.status;
            booking.status = newStatus;

            // Add activity log
            if (!booking.activityLog) booking.activityLog = [];
            booking.activityLog.push({
                timestamp: new Date().toISOString(),
                action: `Status changed from ${oldStatus} to ${newStatus}`,
                user: 'Manager'
            });

            // Add delivery confirmation timestamp
            if (newStatus === 'delivered' && !booking.deliveredAt) {
                booking.deliveredAt = new Date().toISOString();
            }

            saveData();
            updateUI();
            renderBookingsTable();
            showToast(`Status updated to ${newStatus}`, 'success');
        }

        function deleteBooking(id) {
            showConfirmDialog('Are you sure you want to delete this booking?', () => {
                bookings = bookings.filter(b => b.id !== id);
                saveData();
                updateUI();
                renderBookingsTable();
                showToast('Booking deleted', 'success');
            });
        }

        function viewInvoice(id) {
            const booking = bookings.find(b => b.id === id);
            if (!booking) return;

            showInvoiceModal(booking);
        }

        function viewBookingDetails(id) {
            const booking = bookings.find(b => b.id === id);
            if (!booking) return;

            showBookingDetailsModal(booking);
        }

        // Products
        function showAddProductModal() {
            showPromptDialog('Product Name:', (name) => {
                if (!name) return;
                showPromptDialog('Price per Bag (GH₵):', (price) => {
                    const priceNum = parseFloat(price);
                    if (isNaN(priceNum) || priceNum <= 0) {
                        showToast('Invalid price', 'error');
                        return;
                    }

                    const product = {
                        id: Date.now(),
                        name: name,
                        price: priceNum
                    };

                    products.push(product);
                    saveData();
                    updateProductSelect();
                    renderProductsTable();
                    showToast('Product added', 'success');
                });
            });
        }

        function deleteProduct(id) {
            showConfirmDialog('Delete this product?', () => {
                products = products.filter(p => p.id !== id);
                saveData();
                updateProductSelect();
                renderProductsTable();
                showToast('Product deleted', 'success');
            });
        }

        // Admin Functions
        function updateAdminStats() {
            document.getElementById('adminTotalBookings').textContent = bookings.length;
            document.getElementById('adminTotalProducts').textContent = products.length;
        }

        function resetAllData() {
            showConfirmDialog('⚠️ This will DELETE ALL bookings and reset products to defaults. This action cannot be undone. Are you absolutely sure?', () => {
                bookings = [];
                products = getDefaultProducts();
                saveData();
                updateUI();
                showToast('All data has been reset', 'success');
                navigateTo('dashboard');
            });
        }

        function exportToExcel() {
            const csv = generateCSV(bookings);
            downloadCSV(csv, 'CementFlow_Bookings_' + new Date().toISOString().split('T')[0] + '.csv');
            showToast('Bookings exported successfully!', 'success');
        }

        function exportAllData() {
            const csv = generateCSV(bookings);
            downloadCSV(csv, 'CementFlow_All_Data_' + new Date().toISOString().split('T')[0] + '.csv');
            showToast('All data exported successfully!', 'success');
        }

        function generateCSV(data) {
            if (data.length === 0) return 'No data available';

            const headers = ['ID', 'Date', 'Customer Name', 'Phone', 'Address', 'Product', 'Quantity', 'Price/Unit', 'Amount', 'Delivery Date', 'Status', 'Notes'];
            const rows = data.map(b => [
                b.id,
                b.date,
                b.customerName,
                b.customerPhone,
                b.deliveryAddress || '',
                b.product,
                b.quantity,
                b.pricePerUnit,
                b.amount,
                b.deliveryDate || '',
                b.status,
                b.notes || ''
            ].map(field => `"${String(field).replace(/"/g, '""')}"`));

            return [headers.join(','), ...rows.map(r => r.join(','))].join('\n');
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
        }

        // UI Updates
        function updateUI() {
            updateStats();
            updateProductSelect();
            renderRecentBookings();
        }

        function updateStats() {
            const total = bookings.length;
            const pending = bookings.filter(b => b.status === 'pending').length;
            const delivered = bookings.filter(b => b.status === 'delivered').length;
            const revenue = bookings.reduce((sum, b) => sum + b.amount, 0);

            document.getElementById('totalBookings').textContent = total;
            document.getElementById('pendingOrders').textContent = pending;
            document.getElementById('deliveredOrders').textContent = delivered;
            document.getElementById('totalRevenue').textContent = revenue.toLocaleString('en-GH', { minimumFractionDigits: 2 });
        }

        function updateProductSelect() {
            const select = document.getElementById('productSelect');
            select.innerHTML = '<option value="">Select product...</option>';
            products.forEach(p => {
                const option = document.createElement('option');
                option.value = p.id;
                option.textContent = `${p.name} - GH₵${p.price}`;
                select.appendChild(option);
            });
        }

        function renderRecentBookings() {
            const tbody = document.getElementById('recentBookingsTable');
            const recent = bookings.slice(0, 5);

            if (recent.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="empty-state">
                            <div class="empty-state-icon">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <div>No bookings yet. Create your first booking to get started.</div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = recent.map(b => `
                <tr>
                    <td>${b.date}</td>
                    <td>${b.customerName}</td>
                    <td>${b.product}</td>
                    <td>${b.quantity}</td>
                    <td>GH₵${b.amount.toFixed(2)}</td>
                    <td><span class="badge badge-${getStatusBadge(b.status)}">${b.status}</span></td>
                    <td class="table-actions">
                        <button class="icon-btn" onclick="viewInvoice(${b.id})" title="View Invoice">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="deleteBooking(${b.id})" title="Delete">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderBookingsTable() {
            const tbody = document.getElementById('allBookingsTable');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            let filtered = bookings;
            if (currentFilter !== 'all') {
                filtered = filtered.filter(b => b.status === currentFilter);
            }
            if (searchTerm) {
                filtered = filtered.filter(b =>
                    b.customerName.toLowerCase().includes(searchTerm) ||
                    b.customerPhone.includes(searchTerm)
                );
            }

            if (filtered.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="9" class="empty-state">No bookings found</td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = filtered.map(b => `
                <tr>
                    <td>#${b.id.toString().slice(-6)}</td>
                    <td>${b.date}</td>
                    <td>${b.customerName}</td>
                    <td>${b.customerPhone}</td>
                    <td>${b.product}</td>
                    <td>${b.quantity}</td>
                    <td>GH₵${b.amount.toFixed(2)}</td>
                    <td>
                        <div style="display: flex; flex-direction: column; gap: 4px;">
                            <span class="badge badge-${getStatusBadge(b.status)}">${b.status}</span>
                            ${b.status === 'pending' ? `<button class="btn-sm btn-primary" onclick="quickStatusUpdate(${b.id}, 'confirmed')" style="font-size: 11px; padding: 2px 8px;">✓ Confirm</button>` : ''}
                            ${b.status === 'confirmed' ? `<button class="btn-sm btn-primary" onclick="quickStatusUpdate(${b.id}, 'delivered')" style="font-size: 11px; padding: 2px 8px;">✓ Deliver</button>` : ''}
                        </div>
                    </td>
                    <td class="table-actions">
                        <button class="icon-btn" onclick="viewBookingDetails(${b.id})" title="View Details">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="editBooking(${b.id})" title="Edit">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="viewInvoice(${b.id})" title="View Invoice">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                            </svg>
                        </button>
                        <button class="icon-btn" onclick="deleteBooking(${b.id})" title="Delete">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function renderProductsTable() {
            const tbody = document.getElementById('productsTable');

            if (products.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="3" class="empty-state">No products yet</td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = products.map(p => `
                <tr>
                    <td>${p.name}</td>
                    <td>GH₵${p.price.toFixed(2)}</td>
                    <td class="table-actions">
                        <button class="icon-btn" onclick="deleteProduct(${p.id})" title="Delete">
                            <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        function getStatusBadge(status) {
            const map = {
                'pending': 'warning',
                'confirmed': 'warning',
                'delivered': 'success'
            };
            return map[status] || 'warning';
        }

        // Edit Booking Modal
        function showEditBookingModal(booking) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3 class="modal-title">Edit Booking #${booking.id.toString().slice(-6)}</h3>
                    </div>
                    <div class="modal-body">
                        <form id="editBookingForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label required">Customer Name</label>
                                    <input type="text" class="form-input" id="editCustomerName" value="${booking.customerName}" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label required">Phone Number</label>
                                    <input type="tel" class="form-input" id="editCustomerPhone" value="${booking.customerPhone}" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Delivery Address</label>
                                <input type="text" class="form-input" id="editDeliveryAddress" value="${booking.deliveryAddress || ''}">
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label required">Quantity (bags)</label>
                                    <input type="number" class="form-input" id="editQuantity" value="${booking.quantity}" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Delivery Date</label>
                                    <input type="date" class="form-input" id="editDeliveryDate" value="${booking.deliveryDate || ''}">
                                </div>
                            </div>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label class="form-label">Status</label>
                                    <select class="form-select" id="editStatus">
                                        <option value="pending" ${booking.status === 'pending' ? 'selected' : ''}>Pending</option>
                                        <option value="confirmed" ${booking.status === 'confirmed' ? 'selected' : ''}>Confirmed</option>
                                        <option value="delivered" ${booking.status === 'delivered' ? 'selected' : ''}>Delivered</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Payment Status</label>
                                    <select class="form-select" id="editPaymentStatus">
                                        <option value="unpaid" ${(booking.paymentStatus || 'unpaid') === 'unpaid' ? 'selected' : ''}>Unpaid</option>
                                        <option value="partial" ${(booking.paymentStatus || 'unpaid') === 'partial' ? 'selected' : ''}>Partial</option>
                                        <option value="paid" ${(booking.paymentStatus || 'unpaid') === 'paid' ? 'selected' : ''}>Paid</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Notes</label>
                                <textarea class="form-textarea" id="editNotes">${booking.notes || ''}</textarea>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                        <button class="btn btn-primary" id="saveEditBtn">Save Changes</button>
                    </div>
                </div>
            `;

            modal.querySelector('#saveEditBtn').addEventListener('click', () => {
                const quantity = parseInt(document.getElementById('editQuantity').value);
                const product = products.find(p => p.id === booking.productId);
                const oldAmount = booking.amount;

                booking.customerName = document.getElementById('editCustomerName').value;
                booking.customerPhone = document.getElementById('editCustomerPhone').value;
                booking.deliveryAddress = document.getElementById('editDeliveryAddress').value;
                booking.quantity = quantity;
                booking.amount = product.price * quantity;
                booking.deliveryDate = document.getElementById('editDeliveryDate').value;
                const newStatus = document.getElementById('editStatus').value;
                const oldStatus = booking.status;
                booking.status = newStatus;
                booking.paymentStatus = document.getElementById('editPaymentStatus').value;
                booking.notes = document.getElementById('editNotes').value;

                // Add activity log
                if (!booking.activityLog) booking.activityLog = [];
                booking.activityLog.push({
                    timestamp: new Date().toISOString(),
                    action: 'Booking edited',
                    user: 'Manager',
                    changes: `Status: ${oldStatus} → ${newStatus}, Amount: GH₵${oldAmount} → GH₵${booking.amount}`
                });

                // Add delivery timestamp if status changed to delivered
                if (newStatus === 'delivered' && oldStatus !== 'delivered' && !booking.deliveredAt) {
                    booking.deliveredAt = new Date().toISOString();
                }

                saveData();
                updateUI();
                renderBookingsTable();
                modal.remove();
                showToast('Booking updated successfully!', 'success');
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            document.body.appendChild(modal);
        }

        // Booking Details Modal with Activity Log
        function showBookingDetailsModal(booking) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';

            const activityLog = booking.activityLog || [];
            const activityHTML = activityLog.length > 0 ? activityLog.map(log => `
                <div style="padding: 12px; background: var(--bg-tertiary); border-radius: 6px; margin-bottom: 8px;">
                    <div style="font-size: 12px; color: var(--text-muted);">${new Date(log.timestamp).toLocaleString()}</div>
                    <div style="font-weight: 500; margin-top: 4px;">${log.action}</div>
                    ${log.changes ? `<div style="font-size: 13px; margin-top: 4px; color: var(--text-secondary);">${log.changes}</div>` : ''}
                    <div style="font-size: 12px; margin-top: 4px; color: var(--primary);">By: ${log.user}</div>
                </div>
            `).join('') : '<div style="text-align: center; color: var(--text-muted); padding: 20px;">No activity recorded</div>';

            modal.innerHTML = `
                <div class="modal" style="max-width: 700px;">
                    <div class="modal-header">
                        <h3 class="modal-title">Booking Details #${booking.id.toString().slice(-6)}</h3>
                    </div>
                    <div class="modal-body">
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-bottom: 24px;">
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Customer</div>
                                <div style="font-weight: 600;">${booking.customerName}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Phone</div>
                                <div style="font-weight: 600;">${booking.customerPhone}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Product</div>
                                <div style="font-weight: 600;">${booking.product}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Quantity</div>
                                <div style="font-weight: 600;">${booking.quantity} bags</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Amount</div>
                                <div style="font-weight: 600; font-family: 'IBM Plex Mono', monospace; color: var(--primary);">GH₵${booking.amount.toFixed(2)}</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Status</div>
                                <div><span class="badge badge-${getStatusBadge(booking.status)}">${booking.status}</span></div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Payment Status</div>
                                <div><span class="badge badge-${getStatusBadge(booking.paymentStatus || 'unpaid')}">${booking.paymentStatus || 'unpaid'}</span></div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Delivery Date</div>
                                <div style="font-weight: 600;">${booking.deliveryDate || 'Not set'}</div>
                            </div>
                        </div>
                        ${booking.deliveryAddress ? `
                        <div style="margin-bottom: 24px;">
                            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Delivery Address</div>
                            <div style="font-weight: 600;">${booking.deliveryAddress}</div>
                        </div>
                        ` : ''}
                        ${booking.deliveredAt ? `
                        <div style="margin-bottom: 24px; padding: 12px; background: #d4edda; border-radius: 8px; border: 1px solid #28a745;">
                            <div style="font-weight: 600; color: #155724;">✓ Delivered on ${new Date(booking.deliveredAt).toLocaleString()}</div>
                        </div>
                        ` : ''}
                        ${booking.notes ? `
                        <div style="margin-bottom: 24px;">
                            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Notes</div>
                            <div style="padding: 12px; background: var(--bg-secondary); border-radius: 6px;">${booking.notes}</div>
                        </div>
                        ` : ''}
                        <div style="border-top: 2px solid var(--border); padding-top: 16px; margin-top: 16px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary);">Activity Log</h4>
                            ${activityHTML}
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Close</button>
                        <button class="btn btn-primary" onclick="this.closest('.modal-overlay').remove(); editBooking(${booking.id})">Edit Booking</button>
                    </div>
                </div>
            `;

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            document.body.appendChild(modal);
        }

        // Invoice Modal
        function showInvoiceModal(booking) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal" style="max-width: 900px;">
                    <div class="invoice">
                        <div class="invoice-header">
                            <div>
                                <div class="invoice-title">INVOICE</div>
                                <div style="font-size: 18px; font-weight: 600; margin-top: 8px;">CementFlow Distribution</div>
                            </div>
                            <div class="invoice-details">
                                <div><strong>Invoice #:</strong> ${booking.id.toString().slice(-6)}</div>
                                <div><strong>Date:</strong> ${booking.date}</div>
                                <div><strong>Status:</strong> ${booking.status.toUpperCase()}</div>
                            </div>
                        </div>

                        <div style="margin-bottom: 32px;">
                            <div style="font-weight: 600; margin-bottom: 8px;">Bill To:</div>
                            <div>${booking.customerName}</div>
                            <div>${booking.customerPhone}</div>
                            ${booking.deliveryAddress ? `<div>${booking.deliveryAddress}</div>` : ''}
                        </div>

                        <div class="invoice-table">
                            <table style="width: 100%; border-collapse: collapse;">
                                <thead>
                                    <tr>
                                        <th style="text-align: left; padding: 12px; border: 1px solid #ddd; background: #fff3e6;">Product</th>
                                        <th style="text-align: right; padding: 12px; border: 1px solid #ddd; background: #fff3e6;">Quantity</th>
                                        <th style="text-align: right; padding: 12px; border: 1px solid #ddd; background: #fff3e6;">Price/Unit</th>
                                        <th style="text-align: right; padding: 12px; border: 1px solid #ddd; background: #fff3e6;">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 12px; border: 1px solid #ddd;">${booking.product}</td>
                                        <td style="text-align: right; padding: 12px; border: 1px solid #ddd;">${booking.quantity} bags</td>
                                        <td style="text-align: right; padding: 12px; border: 1px solid #ddd;">GH₵${booking.pricePerUnit.toFixed(2)}</td>
                                        <td style="text-align: right; padding: 12px; border: 1px solid #ddd;">GH₵${booking.amount.toFixed(2)}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="invoice-total">
                            <div class="invoice-total-row grand">
                                <div>TOTAL:</div>
                                <div>GH₵${booking.amount.toFixed(2)}</div>
                            </div>
                        </div>

                        ${booking.notes ? `<div style="margin-top: 32px; padding: 16px; background: #f8f9fa; border-radius: 8px;"><strong>Notes:</strong><br>${booking.notes}</div>` : ''}

                        <div style="margin-top: 48px; padding-top: 24px; border-top: 1px solid #ddd; text-align: center; color: #666; font-size: 13px;">
                            Thank you for your business!
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Close</button>
                        <button class="btn btn-primary" onclick="window.print()">Print Invoice</button>
                    </div>
                </div>
            `;

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            document.body.appendChild(modal);
        }

        // Utility Functions
        function showToast(message, type = 'info') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const icons = {
                success: '<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>',
                error: '<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>',
                info: '<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>'
            };

            toast.innerHTML = `
                ${icons[type]}
                <div class="toast-message">${message}</div>
            `;

            container.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        function showConfirmDialog(message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal">
                    <div class="modal-header">
                        <h3 class="modal-title">Confirm Action</h3>
                    </div>
                    <div class="modal-body">
                        <p>${message}</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                        <button class="btn btn-danger" id="confirmBtn">Confirm</button>
                    </div>
                </div>
            `;

            modal.querySelector('#confirmBtn').addEventListener('click', () => {
                onConfirm();
                modal.remove();
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            document.body.appendChild(modal);
        }

        function showPromptDialog(message, onSubmit) {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.innerHTML = `
                <div class="modal">
                    <div class="modal-header">
                        <h3 class="modal-title">${message}</h3>
                    </div>
                    <div class="modal-body">
                        <input type="text" class="form-input" id="promptInput" autofocus>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="this.closest('.modal-overlay').remove()">Cancel</button>
                        <button class="btn btn-primary" id="submitBtn">Submit</button>
                    </div>
                </div>
            `;

            const input = modal.querySelector('#promptInput');
            const submitBtn = modal.querySelector('#submitBtn');

            const submit = () => {
                const value = input.value.trim();
                if (value) {
                    onSubmit(value);
                    modal.remove();
                }
            };

            submitBtn.addEventListener('click', submit);
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') submit();
            });

            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            document.body.appendChild(modal);
            setTimeout(() => input.focus(), 100);
        }

        function checkOnlineStatus() {
            const online = navigator.onLine;
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');

            if (statusDot && statusText) {
                if (online) {
                    statusDot.classList.remove('offline');
                    statusText.textContent = 'Online';
                } else {
                    statusDot.classList.add('offline');
                    statusText.textContent = 'Offline';
                }
            }
        }
    </script>
</body>
</html>
